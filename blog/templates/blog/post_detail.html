{% extends 'blog/base.html' %}
{% block title %}{{ post.title }} | myblog{% endblock %}
{% block content %}
<article class="card">
    <div class="article-header">
        <h1 class="article-title">{{ post.title }}</h1>
        <div class="article-meta">{{ post.created_at|date:'Y年m月d日 H:i' }}</div>
    </div>
    
    {% if post.image %}
    <img src="{{ post.image.url }}" alt="{{ post.title }}" class="article-image">
    {% endif %}
    
    <div class="article-content">
        {{ post.content|linebreaksbr }}
    </div>
    
    <div class="like-section">
        {% if is_liked %}
        <span class="like-count">❤️ {{ post.likes }}</span>
        <span class="like-status">既にいいねしました</span>
        {% else %}
        <form method="post" action="{% url 'blog:like' post.pk %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="like-button">
                ❤️ いいね
            </button>
        </form>
        <span class="like-count">{{ post.likes }}</span>
        {% endif %}
    </div>
</article>

<div class="action-links">
    {% if user.is_authenticated %}
    <a href="{% url 'blog:edit' post.pk %}">この記事を編集する</a>
    {% endif %}
    <a href="{% url 'blog:list' %}">← 一覧に戻る</a>
</div>
{% endblock %}
